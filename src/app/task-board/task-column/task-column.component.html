<div class="container task-column">
  <header class="column-header">
    <div class="title-wrap">
      <h1 id="col-{{ label() }}" class="column-title">{{ label() }}</h1>

      <div class="search-wrap">
        <input
          type="search"
          class="search-input"
          placeholder="Search {{ label() }}..."
          [(ngModel)]="searchTerm"
          (blur)="onSearchBlur()"
        />
      </div>
    </div>

    <span class="count-badge">{{ tasks().length }}</span>
  </header>

  <div [class]="'tasks-list hide-scrollbar'" role="list" aria-live="polite">
    @if (filteredTasks().length==0) {
    <div class="empty-state" role="status">
      @if (searchTerm() && searchTerm().length>0) {
      <p>No tasks match "{{ searchTerm() }}" in {{ label() }}.</p>
      } @else {
      <p>No tasks available with {{ label() }} status.</p>
      }
    </div>
    } @else { @for (task of filteredTasks(); track task) {
    <app-task-card
      role="listitem"
      [ngClass]="task.status"
      [task]="task"
      [cdkDragData]="task"
      cdkDrag
    ></app-task-card>
    } }
  </div>
</div>
